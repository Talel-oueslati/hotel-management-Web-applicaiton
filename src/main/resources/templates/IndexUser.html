<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="ISO-8859-1">
<title>Chambre List</title>

<link rel="stylesheet"
 href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css"
 integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
 crossorigin="anonymous">
 <link rel="stylesheet" th:href="@{/nav.css}">
 <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css">
   
   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">

   
   </head>

<body>
	<div th:insert="fragment/navbaruser :: navbar"></div>

	
	<!-- Carousel Section -->
	  <div id="chambreCarousel" class="carousel slide" data-ride="carousel">
	      <ol class="carousel-indicators">
	          <li data-target="#chambreCarousel" data-slide-to="0" class="active"></li>
	          <li data-target="#chambreCarousel" data-slide-to="1"></li>
	          <li data-target="#chambreCarousel" data-slide-to="2"></li>
	      </ol>
	      <div class="carousel-inner">
	          <div class="carousel-item ">
	              <img th:src="@{'/images/poul3.jpg'}" class="d-block w-100" style="height:600px;" alt="Chambre 1">
				  <div class="card bg-white text-black" style="max-width: 300px; opacity: 0.8; position: absolute; top: 16%; left: 15%;">
				  			  		                    <div class="card-body">
				  			  		                        <h5 class="card-title">50% of Customers Love This Room!</h5>
				  			  		                        <p class="card-text">Stay with us and enjoy unmatched comfort and luxury.</p>
				  			  		                    </div>
				  			  		                </div>
	          </div>
	          <div class="carousel-item active">
	              <img src="https://a.travel-assets.com/travel-assets-manager/destu-40638/HCOM-US-ROW-LastMinGetawaysMODs-HP-Hero-DM-928x398.jpg" class="d-block w-100" style="height:600px;" alt="Chambre 2">
	              
				  <div class="card bg-dark text-white" style="max-width: 300px; opacity: 0.8; position: absolute; top: 20%; left: 20%;">
				  		                    <div class="card-body">
				  		                        <h5 class="card-title">50% of Customers Love This Room!</h5>
				  		                        <p class="card-text">Stay with us and enjoy unmatched comfort and luxury.</p>
				  		                    </div>
				  		                </div>
	          </div>
	          <div class="carousel-item">
	              <img th:src="@{'/images/poul2.jpg'}" class="d-block w-100" style="height:600px;" alt="Chambre 3">
				  <div class="carousel-caption d-none d-md-block">
				           
	          </div>
	      </div>
	      <a class="carousel-control-prev" href="#chambreCarousel" role="button" data-slide="prev">
	          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
	          <span class="sr-only">Previous</span>
	      </a>
	      <a class="carousel-control-next" href="#chambreCarousel" role="button" data-slide="next">
	          <span class="carousel-control-next-icon" aria-hidden="true"></span>
	          <span class="sr-only">Next</span>
	      </a>
	  </div>
	<br>
	<div class="container mt-4">
	     <div class="toast" role="alert" aria-live="assertive" aria-atomic="true" 
	          th:classappend="${successMessage} ? 'show' : 'd-none'" 
	          style="position: absolute; top: 10px; right: 10px;">
	         <div class="toast-header">
	             <strong class="mr-auto">Success</strong>
	             <button type="button" class="ml-2 mb-1 close" data-dismiss="toast" aria-label="Close">
	                 <span aria-hidden="true">&times;</span>
	             </button>
	         </div>
	         <div class="toast-body" th:text="${successMessage}">
	             Chambre updated successfully!
	         </div>
	     </div>
		 <br>
		 <div class="container my-4">
		     <h3>Rechercher par Critères</h3>
		     <div class="form-row">
		         <div class="form-group col-md-4">
		             <label for="filterTarif">Tarif Journalier (Max):</label>
		             <input type="number" id="filterTarif" class="form-control" placeholder="Ex: 200">
		         </div>
		         <div class="form-group col-md-4">
		             <label for="filterEquipements">Équipements:</label>
		             <input type="text" id="filterEquipements" class="form-control" placeholder="Ex: Wi-Fi">
		         </div>
		     </div>
		     <button class="btn btn-primary" onclick="applyFilters()">Rechercher</button>
		 </div>

		 <br>
 <div class="container my-2">
   <h1>Les Chambres Disponible</h1>
	<br>
   <section class="articles" style="margin-left: 3%;">

	<section class="articles">
	    <article th:each="chambre : ${listChambres}" class="room-item" 
	             data-tarif-th="${chambre.tarifJournalier}" 
	             data-equipements-th="${chambre.equipements}">
	        <div class="article-wrapper">
	            <figure>
	                <img th:src="@{'/images/' + ${chambre.imageFileName}}" alt="chambre image" />
	            </figure>
	            <div class="article-body">
	                <h2 th:text="'Chambre ' + ${chambre.numero}"></h2>
	                <p>
	                    <strong>Type:</strong> <span th:text="${chambre.type}"></span><br>
	                    <strong>Capacité:</strong> <span th:text="${chambre.capacite}"></span><br>
	                    <strong>Équipements:</strong> <span th:text="${chambre.equipements}"></span><br>
	                    <strong>Tarif Journalier:</strong> <span th:text="${chambre.tarifJournalier}"></span> DT<br>
	                    <strong>État:</strong> 
	                    <span th:text="${chambre.etat}" 
	                          th:style="${chambre.etat == 'Disponible'} ? 'color: green;' : 'color: red;'">
	                    </span>
	                </p>
	            </div>
	        </div>
	    </article>
	</section>

   </section>
 </div>
 <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
	<script>
	    $(document).ready(function(){
	        $('.toast').toast({ delay: 5000 }); 
	        $('.toast').toast('show'); 
	    });
	</script>
	</div>
	<div>
		<div th:insert="fragment/footer :: footer"></div>

	</div>
</body>

<script>
	  function confirmDeletion() {
	    return confirm('Are you sure you want to delete this room?');
	  }
	</script>

<script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
   <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
   <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>
</html>
<script>
    function checkAvailability(button) {
        var etat = button.getAttribute("etat");

        if (etat === 'Indisponible') {
            alert('Sorry, this room is unavailable.');
            return false; 
        }
        return true; 
    }
</script>

<script>
	function applyFilters() {
	    const maxTarif = parseFloat(document.getElementById('filterTarif').value) || Infinity;
	    const filterEquipements = document.getElementById('filterEquipements').value.trim().toLowerCase();

	    const rooms = document.querySelectorAll('.room-item');

	    rooms.forEach(room => {
	        const roomTarif = parseFloat(room.getAttribute('data-tarif-th'));
	        const roomEquipements = room.getAttribute('data-equipements-th').toLowerCase();

	        const matchesTarif = roomTarif <= maxTarif; 
	        const matchesEquipements = filterEquipements === "" || roomEquipements.includes(filterEquipements);

	        if (matchesTarif && matchesEquipements) {
	            room.style.display = ''; 
	        } else {
	            room.style.display = 'none';
	        }
	    });
	}

</script>

